# TIREX SAPPER - MQL5 Expert Advisor

Проектът TIREX SAPPER представлява пълен, прозрачен MQL5 експерт, който възпроизвежда ключовите принципи на Exorcist – трендово разпознаване, входове при корекции, мрежова логика без опасен мартингейл, динамични стопове и адаптивно управление на риска.

## Описание

TIREX SAPPER е професионален Expert Advisor (EA) за MetaTrader 5, който използва следните ключови стратегии:

### Основни функционалности

1. **Трендово разпознаване (Trend Recognition)**
   - Използва три движещи средни (Fast MA, Slow MA, Trend MA)
   - Потвърждава тренда с минимален брой барове
   - Поддържа различни методи на изчисление (EMA, SMA, и др.)

2. **Входове при корекции (Pullback Entries)**
   - Търси входни точки при временни корекции в посока на тренда
   - Използва Fibonacci нива (по подразбиране 38.2%)
   - Опционален RSI филтър за допълнителна валидация
   - Минимален размер на корекцията в точки

3. **Мрежова логика без мартингейл (Grid Logic)**
   - Фиксиран размер на лотовете (не мартингейл)
   - Конфигурируема стъпка между нивата на мрежата
   - Максимален брой отворени позиции
   - Възможност за търговия само в посока на тренда

4. **Динамични стопове (Dynamic Stops)**
   - Trailing Stop за защита на печалбите
   - Break Even функционалност
   - Регулируеми начални Stop Loss и Take Profit нива
   - Автоматична адаптация към пазарните условия

5. **Адаптивно управление на риска (Adaptive Risk Management)**
   - Процентен риск на сделка спрямо капитала
   - Максимална дневна загуба и печалба
   - Equity stop за защита на капитала
   - Адаптивен размер на лота базиран на текущия баланс

6. **Мулти-символи и таймфреймове**
   - Работи на всеки символ и таймфрейм
   - Възможност за добавяне на допълнителни символи
   - Гъвкава конфигурация за различни пазари

## Файлове в проекта

- **TIREX_SAPPER.mq5** - Основен файл на Expert Advisor
- **TIREX_SAPPER_Utils.mqh** - Библиотека с помощни функции
- **README.md** - Документация на проекта

## Инсталация

1. Копирайте файловете в директорията на MetaTrader 5:
   - `TIREX_SAPPER.mq5` → `MQL5/Experts/`
   - `TIREX_SAPPER_Utils.mqh` → `MQL5/Include/`

2. Компилирайте EA в MetaEditor (F7)

3. Рестартирайте MetaTrader 5 или опреснете навигатора

## Конфигурация

### Общи настройки (General Settings)
- **ExpertComment** - Коментар на експерта (по подразбиране: "TIREX_SAPPER")
- **MagicNumber** - Уникален номер за идентификация на сделките
- **EnableTrading** - Разрешаване/забрана на търговията

### Разпознаване на тренд (Trend Recognition)
- **FastMA_Period** - Период на бързата MA (по подразбиране: 10)
- **SlowMA_Period** - Период на бавната MA (по подразбиране: 50)
- **TrendMA_Period** - Период на трендовата MA (по подразбиране: 200)
- **MA_Method** - Метод на изчисление (EMA, SMA, и др.)
- **MinTrendBars** - Минимален брой барове за потвърждение на тренда

### Входове при корекции (Pullback Entry)
- **PullbackPercent** - Ниво на корекцията (по подразбиране: 0.382 - Fibonacci 38.2%)
- **PullbackLookback** - Брой барове за търсене на корекция
- **MinPullbackSize** - Минимален размер на корекцията в точки
- **UseRSIFilter** - Използване на RSI филтър
- **RSI_Period** - Период на RSI индикатора
- **RSI_Oversold/Overbought** - Нива на RSI

### Мрежа (Grid Settings)
- **EnableGrid** - Разрешаване на мрежовата търговия
- **GridStepPoints** - Стъпка между нивата в точки (по подразбиране: 200)
- **MaxGridLevels** - Максимален брой нива (по подразбиране: 5)
- **GridLotSize** - Фиксиран размер на лота за мрежата
- **GridSameDirection** - Мрежа само в посока на тренда

### Stop Loss & Take Profit
- **InitialSL_Points** - Начален Stop Loss в точки
- **InitialTP_Points** - Начален Take Profit в точки
- **UseTrailingStop** - Използване на trailing stop
- **TrailingStop_Points** - Разстояние на trailing stop
- **TrailingStep_Points** - Стъпка на trailing stop
- **UseBreakEven** - Използване на break even
- **BreakEven_Points** - Активиране на break even
- **BreakEven_Profit** - Заключване на печалба

### Управление на риска (Risk Management)
- **RiskPercent** - Риск на сделка в % (по подразбиране: 1.0%)
- **MaxDailyLoss** - Максимална дневна загуба в % (по подразбиране: 5.0%)
- **MaxDailyProfit** - Максимална дневна печалба в % (по подразбиране: 10.0%)
- **AdaptiveLotSize** - Адаптивен размер на лота
- **MinLotSize** - Минимален размер на лота
- **MaxLotSize** - Максимален размер на лота
- **UseEquityStop** - Използване на equity stop
- **EquityStopPercent** - Процент на equity stop (по подразбиране: 10.0%)

### Времеви филтър (Time Filter)
- **UseTimeFilter** - Използване на времеви филтър
- **StartHour** - Час на започване на търговията
- **EndHour** - Час на спиране на търговията

## Принцип на работа

1. **Инициализация**
   - Създават се индикаторите (MA, RSI)
   - Инициализират се глобалните променливи
   - Проверява се възможността за търговия

2. **При всеки тик (OnTick)**
   - Проверка на разрешението за търговия
   - Актуализация на дневната статистика
   - Проверка на лимитите за риск
   - Актуализация на индикаторите
   - Управление на съществуващите позиции
   - Проверка за нови сигнали за вход
   - Управление на мрежата

3. **Разпознаване на тренд**
   - Сравнява бързата и бавната MA
   - Проверява позицията на цената спрямо трендовата MA
   - Потвърждава тренда с минимален брой барове

4. **Търсене на вход**
   - При потвърден тренд търси корекция
   - Изчислява нивото на корекцията (Fibonacci)
   - Проверява RSI филтъра (ако е включен)
   - Отваря позиция в посока на тренда

5. **Управление на позициите**
   - Проверява за активиране на break even
   - Прилага trailing stop
   - Модифицира стоповете при нужда

6. **Управление на мрежата**
   - При движение на цената отваря допълнителни позиции
   - Използва фиксиран лот размер (не мартингейл)
   - Спазва максималния брой нива

## Предимства на TIREX SAPPER

- ✅ **Прозрачен код** - Лесно разбираем и модифицируем
- ✅ **Без мартингейл** - Безопасна мрежова логика
- ✅ **Адаптивен риск** - Автоматично управление на експозицията
- ✅ **Гъвкави настройки** - Лесна оптимизация за различни пазари
- ✅ **Динамични стопове** - Защита на печалбите
- ✅ **Времеви филтър** - Избор на най-добрите часове за търговия
- ✅ **Дневни лимити** - Защита от прекомерни загуби
- ✅ **Мулти-символи** - Работи на всички инструменти

## Препоръки за използване

1. **Тестване**
   - Винаги първо тествайте на демо сметка
   - Оптимизирайте настройките за вашия символ и таймфрейм
   - Използвайте Strategy Tester на MT5

2. **Риск мениджмънт**
   - Започнете с консервативни настройки (RiskPercent: 0.5-1%)
   - Следете дневните лимити
   - Не търгувайте през новини и високо волатилни периоди

3. **Оптимизация**
   - Оптимизирайте периодите на MA за вашия таймфрейм
   - Настройте GridStepPoints според волатилността на символа
   - Тествайте различни комбинации на параметри

4. **Мониторинг**
   - Проверявайте регулярно логовете
   - Следете производителността
   - Адаптирайте настройките при промяна на пазарните условия

## Технически изисквания

- MetaTrader 5 build 3815 или по-нова версия
- Разрешена автоматична търговия в терминала
- Стабилна интернет връзка
- Достатъчно свободен марджин

## Поддръжка и разработка

Проектът е с отворен код и може да бъде модифициран според нуждите на потребителя.

### Възможни подобрения

- Добавяне на допълнителни индикатори за филтриране
- Интеграция с телеграм бот за нотификации
- Усъвършенстване на логиката за управление на мрежата
- Добавяне на нови стратегии за вход

## Лиценз

Copyright 2024, TIREX SAPPER Project

## Предупреждение

Търговията на финансовите пазари носи висок риск и може да не е подходяща за всеки инвеститор. Минали резултати не гарантират бъдещи печалби. Използвайте EA на своя собствена отговорност.
